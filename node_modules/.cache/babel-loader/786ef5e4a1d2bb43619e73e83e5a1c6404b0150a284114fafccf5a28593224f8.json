{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import axios from'axios';import'../Styles/orderlist.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ListMediumPriority(){const[orders,setOrders]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[itemsPerPage]=useState(10);const[selectedOrders,setSelectedOrders]=useState([]);const fetchOrders=async()=>{try{const response=await axios.get(\"/api/midpriority\");setOrders(response.data.orders);}catch(error){console.error('Error fetching orders:',error);// Handle error, show message to the user, etc.\n}};useEffect(()=>{fetchOrders();},[]);const indexOfLastItem=currentPage*itemsPerPage;const indexOfFirstItem=indexOfLastItem-itemsPerPage;const currentOrders=orders.slice(indexOfFirstItem,indexOfLastItem);const totalPages=Math.ceil(orders.length/itemsPerPage);const paginate=pageNumber=>setCurrentPage(pageNumber);const handleDelete=async()=>{try{// Delete selected orders\nawait Promise.all(selectedOrders.map(orderId=>axios.delete(\"/api/orders/\".concat(orderId))));// After successful deletion, fetch the updated orders\nfetchOrders();// Clear selected orders\nsetSelectedOrders([]);}catch(error){console.error('Error deleting order:',error);// Handle error, show message to the user, etc.\n}};const toggleSelectOrder=orderId=>{setSelectedOrders(prevSelectedOrders=>{if(prevSelectedOrders.includes(orderId)){return prevSelectedOrders.filter(id=>id!==orderId);}else{return[...prevSelectedOrders,orderId];}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"orderlist-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Medium priority orders\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-navigation\",children:[/*#__PURE__*/_jsx(Link,{}),/*#__PURE__*/_jsxs(Link,{to:\"/\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Home | \"}),\" \"]}),\" \",/*#__PURE__*/_jsx(Link,{to:\"/orderselection\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Orders | \"})}),\" \",/*#__PURE__*/_jsx(Link,{to:\"/addorder\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Add Orders\"})})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"order-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Select\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentOrders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:()=>toggleSelectOrder(order.id),checked:selectedOrders.includes(order.id)})}),/*#__PURE__*/_jsx(\"td\",{children:order.customer_name}),/*#__PURE__*/_jsx(\"td\",{children:order.phone_number}),/*#__PURE__*/_jsx(\"td\",{children:order.product_name})]},order.id))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:handleDelete,children:\"Delete Selected\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Page \",currentPage,\" of \",totalPages]}),Array.from({length:totalPages},(_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>paginate(index+1),children:index+1},index+1))]})]});}export default ListMediumPriority;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","jsx","_jsx","jsxs","_jsxs","ListMediumPriority","orders","setOrders","currentPage","setCurrentPage","itemsPerPage","selectedOrders","setSelectedOrders","fetchOrders","response","get","data","error","console","indexOfLastItem","indexOfFirstItem","currentOrders","slice","totalPages","Math","ceil","length","paginate","pageNumber","handleDelete","Promise","all","map","orderId","delete","concat","toggleSelectOrder","prevSelectedOrders","includes","filter","id","className","children","to","order","type","onChange","checked","customer_name","phone_number","product_name","onClick","Array","from","_","index"],"sources":["/home/erick/Desktop/ordertrack/ordermanagement/src/Components/ListMediumPriority.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport '../Styles/orderlist.css'\n\nfunction ListMediumPriority() {\n  const [orders, setOrders] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage] = useState(10);\n  const [selectedOrders, setSelectedOrders] = useState([]);\n\n  const fetchOrders = async () => {\n    try {\n      const response = await axios.get(`/api/midpriority`);\n      setOrders(response.data.orders);\n    } catch (error) {\n      console.error('Error fetching orders:', error);\n      // Handle error, show message to the user, etc.\n    }\n  };\n\n  useEffect(() => {\n    fetchOrders();\n  }, []);\n\n  const indexOfLastItem = currentPage * itemsPerPage;\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n  const currentOrders = orders.slice(indexOfFirstItem, indexOfLastItem);\n\n  const totalPages = Math.ceil(orders.length / itemsPerPage);\n\n  const paginate = (pageNumber) => setCurrentPage(pageNumber);\n\n  const handleDelete = async () => {\n    try {\n      // Delete selected orders\n      await Promise.all(selectedOrders.map(orderId => axios.delete(`/api/orders/${orderId}`)));\n      // After successful deletion, fetch the updated orders\n      fetchOrders();\n      // Clear selected orders\n      setSelectedOrders([]);\n    } catch (error) {\n      console.error('Error deleting order:', error);\n      // Handle error, show message to the user, etc.\n    }\n  };\n\n  const toggleSelectOrder = (orderId) => {\n    setSelectedOrders(prevSelectedOrders => {\n      if (prevSelectedOrders.includes(orderId)) {\n        return prevSelectedOrders.filter(id => id !== orderId);\n      } else {\n        return [...prevSelectedOrders, orderId];\n      }\n    });\n  };\n\n  return (\n    <div className='orderlist-container'>\n      <h2>Medium priority orders</h2>\n      <div className='quick-navigation'>\n        <Link></Link>\n      <Link to=\"/\"><p>Home | </p> </Link> <Link to =\"/orderselection\"><p>Orders | </p></Link> <Link to =\"/addorder\"><p>Add Orders</p></Link>\n      </div>\n      \n      <table className=\"order-table\">\n        <thead>\n          <tr>\n            <th>Select</th>\n            <th>Name</th>\n            <th>Number</th>\n            <th>Product</th>\n            \n          </tr>\n        </thead>\n        <tbody>\n          {currentOrders.map(order => (\n            <tr key={order.id}>\n              <td>\n                <input\n                  type=\"checkbox\"\n                  onChange={() => toggleSelectOrder(order.id)}\n                  checked={selectedOrders.includes(order.id)}\n                />\n              </td>\n              <td>{order.customer_name}</td>\n              <td>{order.phone_number}</td>\n              <td>{order.product_name}</td>\n              \n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <button className=\"delete-button\"  onClick={handleDelete}>Delete Selected</button>\n\n      <div className=\"pagination\">\n        <p>Page {currentPage} of {totalPages}</p>\n        {Array.from({ length: totalPages }, (_, index) => (\n          <button key={index + 1} onClick={() => paginate(index + 1)}>\n            {index + 1}\n          </button>\n        ))}\n      </div>\n     \n    </div>\n  );\n}\n\nexport default ListMediumPriority;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}